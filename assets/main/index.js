System.register("chunks:///_virtual/BallControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts"],(function(t){var e,n,o,i,r,l,a,c,s,p,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.RigidBody2D,c=t.Collider2D,s=t.Contact2DType,p=t.Vec2,u=t.Component},function(t){h=t.Brick}],execute:function(){var d,f,C;r._RF.push({},"f0930u7AphG77KQ51Z3THKN","BallControl",void 0);var b=l.ccclass,y=l.property;t("BallControl",b("BallControl")((C=e((f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,o(e,"ballSpeed",C,i(e)),e.rb=null,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.rb=this.getComponent(a);var t=this.getComponent(c);t&&t.on(s.BEGIN_CONTACT,this.onBeginContact,this)},r.onBeginContact=function(t,e,n){var o=null;!(o=e.node.getComponent(h))&&e.node.parent&&(o=e.node.parent.getComponent(h)),o&&o.hit()},r.resetBall=function(){this.rb&&(this.node.setPosition(0,-200,0),this.rb.linearVelocity=new p(this.ballSpeed,this.ballSpeed))},r.forceStop=function(){this.rb&&(this.rb.linearVelocity=new p(0,0))},e}(u)).prototype,"ballSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),d=f))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,i,o,n,c,a,s,p;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,c=t._decorator,a=t.Sprite,s=t.Color,p=t.Component}],execute:function(){var u,l,h;n._RF.push({},"84919OafxdI+5wfSg5hFQXa","Brick",void 0);var f=c.ccclass,d=c.property;t("Brick",f("Brick")((h=r((l=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return r=t.call.apply(t,[this].concat(n))||this,i(r,"hp",h,o(r)),r}e(r,t);var n=r.prototype;return n.hit=function(){this.hp--,this.hp<=0?this.node.destroy():this.updateVisual()},n.updateVisual=function(){var t=this.getComponent(a);t&&(this.hp>1?t.color=new s(255,0,0,255):t.color=s.WHITE)},r}(p)).prototype,"hp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=l))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./PaddleControl.ts","./BallControl.ts"],(function(t){var e,i,n,r,o,a,l,c,u,s,p,b,h,f,d,k,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Prefab,c=t.Node,u=t.Label,s=t.instantiate,p=t.Vec3,b=t.isValid,h=t.director,f=t.Component},function(t){d=t.Brick},function(t){k=t.PaddleControl},function(t){C=t.BallControl}],execute:function(){var g,m,v,y,w,_,B,P,L,I,z,S,U,G,M,x,N,H,D,O,R,V,F;o._RF.push({},"2883aLftYhF375xnwh2Mm0o","GameManager",void 0);var W=a.ccclass,j=a.property;t("GameManager",(g=W("GameManager"),m=j({type:l,tooltip:"砖块预制体（用于第一关生成）"}),v=j({type:c,tooltip:"存放砖块的父节点"}),y=j({type:c,tooltip:"胜利 UI 界面"}),w=j({type:u,tooltip:"显示剩余砖块数量的文字"}),_=j({type:k,tooltip:"挡板控制器引用"}),B=j({type:C,tooltip:"小球控制器引用"}),P=j({tooltip:"当前关卡砖块默认血量"}),L=j({tooltip:"胜利后跳转的场景名（如 Menu）"}),I=j({tooltip:"自动生成时的行数"}),z=j({tooltip:"自动生成时的列数"}),g((G=e((U=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"brickPrefab",G,r(e)),n(e,"brickContainer",M,r(e)),n(e,"winUI",x,r(e)),n(e,"brickCountLabel",N,r(e)),n(e,"paddleCtrl",H,r(e)),n(e,"ballCtrl",D,r(e)),n(e,"defaultBrickHP",O,r(e)),n(e,"nextSceneName",R,r(e)),n(e,"rows",V,r(e)),n(e,"cols",F,r(e)),e._bricks=[],e._isGameOver=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){var t=this;this.winUI&&(this.winUI.active=!1),this.scheduleOnce((function(){t.initLevel()}),0)},o.initLevel=function(){var t=this;if(this.brickContainer){this._bricks=[];var e=this.brickContainer.getComponentsInChildren(d);e.length>0?(console.log("检测到手动摆放砖块，数量: "+e.length),e.forEach((function(e){e.hp<=1&&t.defaultBrickHP>1&&(e.hp=t.defaultBrickHP),e.updateVisual(),t._bricks.push(e.node)}))):this.brickPrefab&&(console.log("容器为空，正在自动生成砖块..."),this.createDefaultLayout(this.rows,this.cols)),this.updateBrickCountUI()}},o.createDefaultLayout=function(t,e){for(var i=0;i<t;i++)for(var n=0;n<e;n++){var r=s(this.brickPrefab);this.brickContainer.addChild(r);var o=120*(n-(e-1)/2),a=50*(i-(t-1)/2)+200;r.setPosition(new p(o,a,0));var l=r.getComponent(d);l&&(l.hp=this.defaultBrickHP,l.updateVisual(),this._bricks.push(r))}},o.update=function(t){if(!this._isGameOver){for(var e=!1,i=this._bricks.length-1;i>=0;i--)b(this._bricks[i])||(this._bricks.splice(i,1),e=!0);e&&(this.updateBrickCountUI(),0===this._bricks.length&&this.handleWin())}},o.handleWin=function(){this._isGameOver||(this._isGameOver=!0,console.log("游戏胜利！"),this.paddleCtrl&&this.paddleCtrl.forceStopGame(),this.ballCtrl&&this.ballCtrl.forceStop(),this.winUI&&(this.winUI.active=!0))},o.updateBrickCountUI=function(){this.brickCountLabel&&(this.brickCountLabel.string="BRICKS: "+this._bricks.length)},o.onNextLevelBtnClicked=function(){var t=this.nextSceneName&&""!==this.nextSceneName.trim()?this.nextSceneName:"Menu";console.log("跳转至: "+t),h.loadScene(t)},o.onRestartBtnClicked=function(){h.loadScene(h.getScene().name)},e}(f)).prototype,"brickPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(U.prototype,"brickContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(U.prototype,"winUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(U.prototype,"brickCountLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(U.prototype,"paddleCtrl",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(U.prototype,"ballCtrl",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(U.prototype,"defaultBrickHP",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=e(U.prototype,"nextSceneName",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Menu"}}),V=e(U.prototype,"rows",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),F=e(U.prototype,"cols",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=U))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,a,i,o,s,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.Label,l=t.director,c=t.Component}],execute:function(){var u,p,f,d,L;i._RF.push({},"ad873ycjU1NPrTZNVzxpMSn","LoadingCtrl",void 0);var h=o.ccclass,b=o.property;t("LoadingCtrl",(u=h("LoadingCtrl"),p=b(s),u((L=e((d=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"statusLabel",L,a(e)),e}return r(e,t),e.prototype.start=function(){var t=this,e="Menu";this.statusLabel&&(this.statusLabel.string="���ڼ�����Դ..."),l.preloadScene(e,(function(e,r){var n=Math.floor(e/r*100);t.statusLabel&&(t.statusLabel.string="������: "+n+"%")}),(function(r){r?console.error("����ʧ��:",r):t.scheduleOnce((function(){l.loadScene(e)}),1)}))},e}(c)).prototype,"statusLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BallControl.ts","./Brick.ts","./GameManager.ts","./LoadingCtrl.ts","./MenuCtrl.ts","./MenuManager.ts","./PaddleControl.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MenuCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.director,c=t.Component}],execute:function(){var i;n._RF.push({},"f30cap1mQhH/ZOIwKHi6ai5","MenuCtrl",void 0);var u=r.ccclass;r.property,t("MenuCtrl",u("MenuCtrl")(i=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onStartGameBtnClicked=function(){o.loadScene("Main")},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/MenuManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,l,r,o,i,c,a,s,u,v,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,l=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,c=e.Node,a=e.Label,s=e.Sprite,u=e.Color,v=e.director,p=e.Component}],execute:function(){var f,h,g,L,d,b,y,B,S;o._RF.push({},"82ec1AOXEhKZZ6NJfAbHUYo","MenuManager",void 0);var M=i.ccclass,m=i.property;e("MenuManager",(f=M("MenuManager"),h=m([c]),g=m(a),L=m({type:[String],tooltip:"���������б���������Դ������һ��"}),f((y=t((b=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,l(t,"levelButtons",y,r(t)),l(t,"currentLevelLabel",B,r(t)),l(t,"levelScenes",S,r(t)),t.selectedLevelIndex=0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.selectLevel(0)},o.onLevelBtnClicked=function(e){for(var t=e.target,n=-1,l=0;l<this.levelButtons.length;l++)if(this.levelButtons[l]===t||this.levelButtons[l]===t.parent){n=l;break}-1!==n&&this.selectLevel(n)},o.selectLevel=function(e){this.selectedLevelIndex=e,console.log("��ǰѡ�йؿ�����:",e," ��Ӧ������:",this.levelScenes[e]);for(var t=0;t<this.levelButtons.length;t++){var n=this.levelButtons[t];if(n){var l=n.getComponent(s);l&&(l.color=t===e?new u(100,255,100):u.WHITE)}}this.currentLevelLabel&&(this.currentLevelLabel.string="��ѡ��: "+(0===e?"��һ��":"�ڶ���"))},o.onStartGameBtnClicked=function(){var e=this.levelScenes[this.selectedLevelIndex];e?(console.log("׼�����볡��: "+e),v.loadScene(e,(function(t){t&&console.error("���س��� ["+e+"] ʧ�ܣ���ȷ�ϣ�\n1. ��Դ�����������������\n2. ��������(Build Settings)���Ѿ�����������")}))):console.error("δ�ҵ���Ӧ�ĳ������ƣ����� levelScenes ��������")},t}(p)).prototype,"levelButtons",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(b.prototype,"currentLevelLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(b.prototype,"levelScenes",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return["Main","Level2"]}}),d=b))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,n,l,s,o,r,h,c,d,u,p,m,b,v,g,f,y,S,_,C,T,L,O,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,o=e.Prefab,r=e.Node,h=e.Graphics,c=e.Label,d=e.input,u=e.Input,p=e.Collider2D,m=e.Contact2DType,b=e.isValid,v=e.UITransform,g=e.RigidBody2D,f=e.math,y=e.Vec2,S=e.v3,_=e.instantiate,C=e.game,T=e.EventMouse,L=e.Vec3,O=e.Color,P=e.Component}],execute:function(){var A,G,E,B,R,U,w,H,I,M,N,z,D,F;l._RF.push({},"616baWA/FRLJaXhjyxKSsOO","PaddleControl",void 0);var x=s.ccclass,V=s.property;e("PaddleControl",(A=x("PaddleControl"),G=V(o),E=V(r),B=V(h),R=V(c),A((H=t((w=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return t=e.call.apply(e,[this].concat(l))||this,a(t,"ballPrefab",H,n(t)),a(t,"gameOverUI",I,n(t)),a(t,"aimLineGraphics",M,n(t)),a(t,"scoreLabel",N,n(t)),a(t,"launchForce",z,n(t)),a(t,"paddleSensitivity",D,n(t)),a(t,"angleSensitivity",F,n(t)),t.ball=null,t._isGameStarted=!1,t._canvasWidth=720,t._launchAngle=90,t._minAngle=40,t._maxAngle=140,t._hitCount=0,t.SPEED_UP_RATIO=1.05,t}i(t,e);var l=t.prototype;return l.onLoad=function(){d.on(u.EventType.MOUSE_MOVE,this.onHandleMove,this),d.on(u.EventType.TOUCH_MOVE,this.onHandleMove,this),d.on(u.EventType.MOUSE_DOWN,this.onHandlePress,this),d.on(u.EventType.TOUCH_START,this.onHandlePress,this),d.on(u.EventType.MOUSE_UP,this.onHandleRelease,this),d.on(u.EventType.TOUCH_END,this.onHandleRelease,this);var e=this.getComponent(p);e&&e.on(m.BEGIN_CONTACT,this.onBallHitPaddle,this),this.updateCanvasSize(),this.resetToServeState()},l.forceStopGame=function(){this._isGameStarted=!1,this.ball&&b(this.ball)&&(this.ball.destroy(),this.ball=null),this.aimLineGraphics&&this.aimLineGraphics.clear()},l.updateCanvasSize=function(){var e=this.node.scene.getChildByName("Canvas");if(e){var t=e.getComponent(v);t&&(this._canvasWidth=t.width)}},l.onBallHitPaddle=function(e,t){if(this._isGameStarted&&("Ball"===t.node.name||t.getComponent(g))){this._hitCount++,this.scoreLabel&&(this.scoreLabel.string="HITS: "+this._hitCount);var i=t.getComponent(g);if(!i)return;var a=t.node.worldPosition,n=e.node.worldPosition,l=e.getComponent(v),s=a.x-n.x,o=l.width/2,r=90-60*f.clamp(s/o,-1,1),h=f.toRadian(r),c=i.linearVelocity.length()*this.SPEED_UP_RATIO;this.scheduleOnce((function(){b(i)&&(i.linearVelocity=new y(Math.cos(h),Math.sin(h)).multiplyScalar(c))}),0)}},l.resetPaddleStatus=function(){this.resetToServeState()},l.resetToServeState=function(){this._isGameStarted=!1,this._hitCount=0,this.scoreLabel&&(this.scoreLabel.string="HITS: 0"),this.gameOverUI&&(this.gameOverUI.active=!1),this.node.setPosition(S(0,this.node.position.y,0)),this._launchAngle=90,this.ball&&b(this.ball)&&(this.ball.destroy(),this.ball=null),this.prepareBall()},l.prepareBall=function(){if(!(!this.ballPrefab||this.ball&&b(this.ball))){this.ball=_(this.ballPrefab),this.ball.name="Ball",this.node.addChild(this.ball),this.ball.setPosition(S(0,60,0));var e=this.ball.getComponent(g);e&&(e.enabled=!1,e.linearVelocity=y.ZERO),this.drawAimLineByAngle()}},l.onHandleMove=function(e){if(!C.isPaused||!C.isPaused()){var t=e.getDeltaX();if(this._isGameStarted){var i=this.node.position,a=i.x+t*this.paddleSensitivity,n=this._canvasWidth/2-60;a=f.clamp(a,-n,n),this.node.setPosition(S(a,i.y,0))}else this._launchAngle-=t*this.angleSensitivity,this._launchAngle=f.clamp(this._launchAngle,this._minAngle,this._maxAngle),this.drawAimLineByAngle()}},l.onHandlePress=function(e){e instanceof T&&e.getButton()!==T.BUTTON_LEFT||!this._isGameStarted&&this.gameOverUI&&(this.gameOverUI.active=!1)},l.onHandleRelease=function(e){e instanceof T&&e.getButton()!==T.BUTTON_LEFT||this._isGameStarted||this.launchBall()},l.drawAimLineByAngle=function(){if(this.aimLineGraphics&&this.ball&&b(this.ball)){this.aimLineGraphics.clear();var e=this.ball.getComponent(v).convertToWorldSpaceAR(L.ZERO),t=this.aimLineGraphics.node.getComponent(v).convertToNodeSpaceAR(e),i=f.toRadian(this._launchAngle);this.aimLineGraphics.lineWidth=4,this.aimLineGraphics.strokeColor=new O(255,255,255,180),this.aimLineGraphics.moveTo(t.x,t.y),this.aimLineGraphics.lineTo(t.x+200*Math.cos(i),t.y+200*Math.sin(i)),this.aimLineGraphics.stroke()}},l.launchBall=function(){if(!this._isGameStarted&&this.ball&&b(this.ball)){var e=this.ball.getComponent(g);if(e){var t=this.ball.getComponent(v).convertToWorldSpaceAR(L.ZERO),i=this.node.scene.getChildByName("Canvas");this.ball.parent=i,this.ball.setPosition(i.getComponent(v).convertToNodeSpaceAR(t));var a=f.toRadian(this._launchAngle);this._isGameStarted=!0,this.aimLineGraphics&&this.aimLineGraphics.clear(),e.enabled=!0,e.linearVelocity=new y(Math.cos(a),Math.sin(a)).multiplyScalar(this.launchForce)}}},l.update=function(e){if(this._isGameStarted&&this.ball&&b(this.ball)){var t=this.ball.getComponent(v).convertToWorldSpaceAR(L.ZERO);this.node.scene.getChildByName("Canvas").getComponent(v).convertToNodeSpaceAR(t).y<-700&&this.onBallFail()}},l.onBallFail=function(){var e=this;this._isGameStarted&&(this._isGameStarted=!1,this.gameOverUI&&(this.gameOverUI.active=!0),this.ball&&(this.ball.destroy(),this.ball=null),this.scheduleOnce((function(){e.resetToServeState()}),1.5))},t}(P)).prototype,"ballPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"gameOverUI",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(w.prototype,"aimLineGraphics",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(w.prototype,"scoreLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"launchForce",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),D=t(w.prototype,"paddleSensitivity",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=t(w.prototype,"angleSensitivity",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),U=w))||U));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});