System.register("chunks:///_virtual/BallControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,r,l;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,r=o._decorator,l=o.Component}],execute:function(){var e;n._RF.push({},"f0930u7AphG77KQ51Z3THKN","BallControl",void 0);var c=r.ccclass;o("BallControl",c("BallControl")(e=function(o){function n(){return o.apply(this,arguments)||this}return t(n,o),n}(l))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,e,c,r,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,c=t.Collider2D,r=t.Contact2DType,i=t.isValid,s=t.Component}],execute:function(){var u;o._RF.push({},"2ce94REnbxKA7Yr4rAg1E5w","Brick.ts",void 0);var a=e.ccclass;t("Brick",a("Brick")(u=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){var t=this,n=this.getComponent(c);n&&n.on(r.BEGIN_CONTACT,(function(){t.scheduleOnce((function(){i(t.node)&&t.node.destroy()}),0)}),this)},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,n,r,a,s,o,c,l,h,u,b,f,p,d,k,v,g;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,s=i._decorator,o=i.Prefab,c=i.Node,l=i.PhysicsSystem2D,h=i.Contact2DType,u=i.input,b=i.Input,f=i.KeyCode,p=i.instantiate,d=i.Vec3,k=i.isValid,v=i.game,g=i.Component}],execute:function(){var m,w,C,y,I,_,P,U,G;a._RF.push({},"2883aLftYhF375xnwh2Mm0o","GameManager",void 0);var B=s.ccclass,M=s.property;i("GameManager",(m=B("GameManager"),w=M(o),C=M(c),y=M(c),m((P=e((_=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=i.call.apply(i,[this].concat(a))||this,n(e,"brickPrefab",P,r(e)),n(e,"winUI",U,r(e)),n(e,"brickContainer",G,r(e)),e._bricks=[],e}t(e,i);var a=e.prototype;return a.onLoad=function(){var i=this;l.instance.on(h.BEGIN_CONTACT,(function(){}),this),this.winUI?this.winUI.active=!1:console.warn("未关联 WinUI 节点，请在编辑器中检查 GameManager 的属性！"),this.brickContainer||(this.brickContainer=this.node),this.createBricks(),u.on(b.EventType.KEY_DOWN,(function(e){e.keyCode===f.KEY_R&&i.resetGame()}),this)},a.createBricks=function(){this.brickContainer&&this.brickContainer.removeAllChildren(),this._bricks=[];for(var i=0;i<5;i++)for(var e=0;e<8;e++){var t=p(this.brickPrefab);this.brickContainer.addChild(t),t.setPosition(new d(90*e-315,250-40*i,0)),this._bricks.push(t)}},a.update=function(i){for(var e=this._bricks.length-1;e>=0;e--)k(this._bricks[e])||this._bricks.splice(e,1);0===this._bricks.length&&this.winUI&&!this.winUI.active&&this.showWin()},a.showWin=function(){this.winUI&&(this.winUI.active=!0,this.winUI.setSiblingIndex(99),this.scheduleOnce((function(){v.pause()}),.1))},a.resetGame=function(){console.log("强制重置游戏..."),v.resume(),this.winUI&&(this.winUI.active=!1),this.createBricks();var i=this.node.scene.getChildByName("Canvas");if(i){var e=i.getChildByName("Paddle");if(e){var t=e.getComponent("PaddleControl");t&&t.resetPaddleStatus&&t.resetPaddleStatus()}}},e}(g)).prototype,"brickPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(_.prototype,"winUI",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(_.prototype,"brickContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=_))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BallControl.ts","./Brick.ts.ts","./GameManager.ts","./PaddleControl.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PaddleControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,n,l,o,s,r,h,c,u,d,p,m,b,v,g,f,_,y,S,C,A,L,P,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,s=e.Prefab,r=e.Node,h=e.Graphics,c=e.Label,u=e.input,d=e.Input,p=e.Collider2D,m=e.Contact2DType,b=e.UITransform,v=e.RigidBody2D,g=e.isValid,f=e.v3,_=e.instantiate,y=e.Vec2,S=e.game,C=e.math,A=e.EventMouse,L=e.Vec3,P=e.Color,T=e.Component}],execute:function(){var G,O,B,R,E,I,M,w,U,D,N,W;l._RF.push({},"616baWA/FRLJaXhjyxKSsOO","PaddleControl",void 0);var F=o.ccclass,V=o.property;e("PaddleControl",(G=F("PaddleControl"),O=V(s),B=V(r),R=V(h),E=V(c),G((w=t((M=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,a(t,"ballPrefab",w,n(t)),a(t,"gameOverUI",U,n(t)),a(t,"aimLineGraphics",D,n(t)),a(t,"scoreLabel",N,n(t)),a(t,"launchForce",W,n(t)),t.ball=null,t._isGameStarted=!1,t._canvasWidth=1280,t._launchAngle=90,t._minAngle=30,t._maxAngle=150,t._hitCount=0,t.SPEED_UP_RATIO=1.05,t}i(t,e);var l=t.prototype;return l.onLoad=function(){u.on(d.EventType.MOUSE_MOVE,this.onMouseMove,this),u.on(d.EventType.MOUSE_DOWN,this.onMouseDown,this);var e=this.getComponent(p);e&&e.on(m.BEGIN_CONTACT,this.onBallHitPaddle,this);var t=this.node.scene.getChildByName("Canvas");if(t){var i=t.getComponent(b);i&&(this._canvasWidth=i.width)}this.resetToServeState()},l.onBallHitPaddle=function(e,t){var i=this;if(this._isGameStarted&&("Ball"===t.node.name||t.getComponent(v))){this._hitCount++,this.scoreLabel&&(this.scoreLabel.string="HITS: "+this._hitCount);var a=t.getComponent(v);a&&this.scheduleOnce((function(){g(a)&&(a.linearVelocity=a.linearVelocity.multiplyScalar(i.SPEED_UP_RATIO))}),0)}},l.resetPaddleStatus=function(){this.resetToServeState()},l.resetToServeState=function(){this._isGameStarted=!1,this._hitCount=0,this.scoreLabel&&(this.scoreLabel.string="HITS: 0"),this.gameOverUI&&(this.gameOverUI.active=!1),this.node.setPosition(f(0,this.node.position.y,0)),this._launchAngle=90,this.ball&&g(this.ball)&&(this.ball.destroy(),this.ball=null),this.prepareBall()},l.prepareBall=function(){if(this.ballPrefab){if(!this.ball||!g(this.ball)){this.ball=_(this.ballPrefab),this.ball.name="Ball",this.node.addChild(this.ball),this.ball.setPosition(f(0,60,0));var e=this.ball.getComponent(v);e&&(e.enabled=!1,e.linearVelocity=y.ZERO),this.drawAimLineByAngle()}}else console.error("❌ 错误：PaddleControl 脚本未关联 Ball Prefab！请在编辑器中拖入球的预制体。")},l.onMouseMove=function(e){if(!S.isPaused||!S.isPaused())if(this._isGameStarted){var t=e.getLocationX()-this._canvasWidth/2,i=this._canvasWidth/2-80;t=C.clamp(t,-i,i),this.node.setPosition(f(t,this.node.position.y,0))}else{var a=e.getDeltaX();this._launchAngle-=.5*a,this._launchAngle=C.clamp(this._launchAngle,this._minAngle,this._maxAngle),this.drawAimLineByAngle()}},l.onMouseDown=function(e){this._isGameStarted||e.getButton()!==A.BUTTON_LEFT||this.launchBall()},l.drawAimLineByAngle=function(){if(this.aimLineGraphics&&this.ball){this.aimLineGraphics.clear();var e=this.ball.getComponent(b).convertToWorldSpaceAR(L.ZERO),t=this.aimLineGraphics.node.getComponent(b).convertToNodeSpaceAR(e),i=C.toRadian(this._launchAngle);this.aimLineGraphics.lineWidth=4,this.aimLineGraphics.strokeColor=new P(255,255,255,180),this.aimLineGraphics.moveTo(t.x,t.y),this.aimLineGraphics.lineTo(t.x+250*Math.cos(i),t.y+250*Math.sin(i)),this.aimLineGraphics.stroke()}},l.launchBall=function(){if(!this._isGameStarted&&this.ball){var e=this.ball.getComponent(v);if(e){var t=this.ball.getComponent(b).convertToWorldSpaceAR(L.ZERO),i=this.node.scene.getChildByName("Canvas");this.ball.parent=i,this.ball.setPosition(i.getComponent(b).convertToNodeSpaceAR(t));var a=C.toRadian(this._launchAngle);this._isGameStarted=!0,this.aimLineGraphics&&this.aimLineGraphics.clear(),e.enabled=!0,e.linearVelocity=new y(Math.cos(a),Math.sin(a)).multiplyScalar(this.launchForce)}}},l.update=function(e){if(this._isGameStarted&&this.ball&&g(this.ball)){var t=this.ball.getComponent(b).convertToWorldSpaceAR(L.ZERO);this.node.scene.getChildByName("Canvas").getComponent(b).convertToNodeSpaceAR(t).y<-450&&this.onBallFail()}},l.onBallFail=function(){var e=this;this._isGameStarted&&(this._isGameStarted=!1,this.gameOverUI&&(this.gameOverUI.active=!0,this.gameOverUI.setSiblingIndex(99)),this.ball&&(this.ball.destroy(),this.ball=null),this.scheduleOnce((function(){e.resetToServeState()}),1.5))},t}(T)).prototype,"ballPrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(M.prototype,"gameOverUI",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(M.prototype,"aimLineGraphics",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(M.prototype,"scoreLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(M.prototype,"launchForce",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),I=M))||I));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});