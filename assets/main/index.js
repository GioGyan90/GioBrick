System.register("chunks:///_virtual/BallControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,r,l;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,r=o._decorator,l=o.Component}],execute:function(){var e;n._RF.push({},"f0930u7AphG77KQ51Z3THKN","BallControl",void 0);var c=r.ccclass;o("BallControl",c("BallControl")(e=function(o){function n(){return o.apply(this,arguments)||this}return t(n,o),n}(l))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,e,c,r,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,c=t.Collider2D,r=t.Contact2DType,i=t.isValid,s=t.Component}],execute:function(){var u;o._RF.push({},"2ce94REnbxKA7Yr4rAg1E5w","Brick.ts",void 0);var a=e.ccclass;t("Brick",a("Brick")(u=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){var t=this,n=this.getComponent(c);n&&n.on(r.BEGIN_CONTACT,(function(){t.scheduleOnce((function(){i(t.node)&&t.node.destroy()}),0)}),this)},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,n,r,a,s,o,c,l,h,u,b,f,p,d,C,k,v,m;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,s=i._decorator,o=i.Prefab,c=i.Node,l=i.Label,h=i.PhysicsSystem2D,u=i.Contact2DType,b=i.input,f=i.Input,p=i.KeyCode,d=i.instantiate,C=i.Vec3,k=i.isValid,v=i.game,m=i.Component}],execute:function(){var g,y,w,I,_,B,U,G,P,L,N;a._RF.push({},"2883aLftYhF375xnwh2Mm0o","GameManager",void 0);var z=s.ccclass,D=s.property;i("GameManager",(g=z("GameManager"),y=D(o),w=D(c),I=D(c),_=D(l),g((G=e((U=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=i.call.apply(i,[this].concat(a))||this,n(e,"brickPrefab",G,r(e)),n(e,"winUI",P,r(e)),n(e,"brickContainer",L,r(e)),n(e,"brickCountLabel",N,r(e)),e._bricks=[],e._isGameOver=!1,e}t(e,i);var a=e.prototype;return a.onLoad=function(){var i=this;h.instance.on(u.BEGIN_CONTACT,(function(){}),this),this.winUI&&(this.winUI.active=!1),this.brickContainer||(this.brickContainer=this.node),this.createBricks(),b.on(f.EventType.KEY_DOWN,(function(e){e.keyCode===p.KEY_R&&i.resetGame()}),this)},a.createBricks=function(){this.brickContainer&&this.brickContainer.removeAllChildren(),this._bricks=[],this._isGameOver=!1;for(var i=0;i<5;i++)for(var e=0;e<6;e++){var t=d(this.brickPrefab);this.brickContainer.addChild(t),t.setPosition(new C(90*e-225,250-40*i,0)),this._bricks.push(t)}this.updateBrickCountUI()},a.update=function(i){if(!this._isGameOver){for(var e=!1,t=this._bricks.length-1;t>=0;t--)k(this._bricks[t])||(this._bricks.splice(t,1),e=!0);e&&this.updateBrickCountUI(),0===this._bricks.length&&this.winUI&&!this.winUI.active&&this.showWin()}},a.updateBrickCountUI=function(){this.brickCountLabel&&(this.brickCountLabel.string="BRICKS: "+this._bricks.length)},a.showWin=function(){this._isGameOver=!0,this.winUI&&(this.winUI.active=!0,this.winUI.setSiblingIndex(99));var i=this.node.scene.getChildByName("Canvas");if(i){var e=i.getChildByName("Ball");e&&(e.destroy(),console.log("胜利：已移除球"))}},a.onRestartBtnClicked=function(){this.resetGame()},a.resetGame=function(){v.resume(),this.winUI&&(this.winUI.active=!1),this.createBricks();var i=this.node.scene.getChildByName("Canvas");if(i){var e=i.getChildByName("Paddle");if(e){var t=e.getComponent("PaddleControl");t&&t.resetPaddleStatus()}}},e}(m)).prototype,"brickPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(U.prototype,"winUI",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(U.prototype,"brickContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(U.prototype,"brickCountLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=U))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,a,i,o,s,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.Label,l=t.director,c=t.Component}],execute:function(){var u,p,f,d,L;i._RF.push({},"ad873ycjU1NPrTZNVzxpMSn","LoadingCtrl",void 0);var b=o.ccclass,g=o.property;t("LoadingCtrl",(u=b("LoadingCtrl"),p=g(s),u((L=e((d=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"statusLabel",L,a(e)),e}return r(e,t),e.prototype.start=function(){var t=this,e="Main";this.statusLabel&&(this.statusLabel.string="������ԴԤ����..."),l.preloadScene(e,(function(e,r){var n=Math.floor(e/r*100);t.statusLabel&&(t.statusLabel.string="������: "+n+"%")}),(function(r){if(r)return console.error("���س���ʧ�ܣ����������Ƿ���ȷ:",r),void(t.statusLabel&&(t.statusLabel.string="����ʧ�ܣ���������"));console.log("����Ԥ���سɹ���1�����ת..."),t.scheduleOnce((function(){l.loadScene(e)}),1)}))},e}(c)).prototype,"statusLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BallControl.ts","./Brick.ts.ts","./GameManager.ts","./LoadingCtrl.ts","./PaddleControl.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PaddleControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,a,l,s,o,r,h,c,d,u,p,m,b,v,g,f,y,S,_,C,T,O,P,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,o=e.Prefab,r=e.Node,h=e.Graphics,c=e.Label,d=e.input,u=e.Input,p=e.Collider2D,m=e.Contact2DType,b=e.UITransform,v=e.RigidBody2D,g=e.math,f=e.isValid,y=e.Vec2,S=e.v3,_=e.instantiate,C=e.game,T=e.EventMouse,O=e.Vec3,P=e.Color,A=e.Component}],execute:function(){var L,G,E,B,R,U,w,H,I,M,N,z,D,F;l._RF.push({},"616baWA/FRLJaXhjyxKSsOO","PaddleControl",void 0);var x=s.ccclass,V=s.property;e("PaddleControl",(L=x("PaddleControl"),G=V(o),E=V(r),B=V(h),R=V(c),L((H=t((w=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return t=e.call.apply(e,[this].concat(l))||this,n(t,"ballPrefab",H,a(t)),n(t,"gameOverUI",I,a(t)),n(t,"aimLineGraphics",M,a(t)),n(t,"scoreLabel",N,a(t)),n(t,"launchForce",z,a(t)),n(t,"paddleSensitivity",D,a(t)),n(t,"angleSensitivity",F,a(t)),t.ball=null,t._isGameStarted=!1,t._canvasWidth=720,t._launchAngle=90,t._minAngle=40,t._maxAngle=140,t._hitCount=0,t.SPEED_UP_RATIO=1.05,t}i(t,e);var l=t.prototype;return l.onLoad=function(){d.on(u.EventType.MOUSE_MOVE,this.onHandleMove,this),d.on(u.EventType.TOUCH_MOVE,this.onHandleMove,this),d.on(u.EventType.MOUSE_DOWN,this.onHandlePress,this),d.on(u.EventType.TOUCH_START,this.onHandlePress,this),d.on(u.EventType.MOUSE_UP,this.onHandleRelease,this),d.on(u.EventType.TOUCH_END,this.onHandleRelease,this);var e=this.getComponent(p);e&&e.on(m.BEGIN_CONTACT,this.onBallHitPaddle,this),this.updateCanvasSize(),this.resetToServeState()},l.updateCanvasSize=function(){var e=this.node.scene.getChildByName("Canvas");if(e){var t=e.getComponent(b);t&&(this._canvasWidth=t.width)}},l.onBallHitPaddle=function(e,t){if(this._isGameStarted&&("Ball"===t.node.name||t.getComponent(v))){this._hitCount++,this.scoreLabel&&(this.scoreLabel.string="HITS: "+this._hitCount);var i=t.getComponent(v);if(!i)return;var n=t.node.worldPosition,a=e.node.worldPosition,l=e.getComponent(b),s=n.x-a.x,o=l.width/2,r=90-60*g.clamp(s/o,-1,1),h=g.toRadian(r),c=i.linearVelocity.length()*this.SPEED_UP_RATIO;this.scheduleOnce((function(){f(i)&&(i.linearVelocity=new y(Math.cos(h),Math.sin(h)).multiplyScalar(c))}),0)}},l.resetPaddleStatus=function(){this.resetToServeState()},l.resetToServeState=function(){this._isGameStarted=!1,this._hitCount=0,this.scoreLabel&&(this.scoreLabel.string="HITS: 0"),this.gameOverUI&&(this.gameOverUI.active=!1),this.node.setPosition(S(0,this.node.position.y,0)),this._launchAngle=90,this.ball&&f(this.ball)&&(this.ball.destroy(),this.ball=null),this.prepareBall()},l.prepareBall=function(){if(!(!this.ballPrefab||this.ball&&f(this.ball))){this.ball=_(this.ballPrefab),this.ball.name="Ball",this.node.addChild(this.ball),this.ball.setPosition(S(0,60,0));var e=this.ball.getComponent(v);e&&(e.enabled=!1,e.linearVelocity=y.ZERO),this.drawAimLineByAngle()}},l.onHandleMove=function(e){if(!C.isPaused||!C.isPaused()){var t=e.getDeltaX();if(this._isGameStarted){var i=this.node.position,n=i.x+t*this.paddleSensitivity,a=this._canvasWidth/2-60;n=g.clamp(n,-a,a),this.node.setPosition(S(n,i.y,0))}else this._launchAngle-=t*this.angleSensitivity,this._launchAngle=g.clamp(this._launchAngle,this._minAngle,this._maxAngle),this.drawAimLineByAngle()}},l.onHandlePress=function(e){e instanceof T&&e.getButton()!==T.BUTTON_LEFT||!this._isGameStarted&&this.gameOverUI&&(this.gameOverUI.active=!1)},l.onHandleRelease=function(e){e instanceof T&&e.getButton()!==T.BUTTON_LEFT||this._isGameStarted||this.launchBall()},l.drawAimLineByAngle=function(){if(this.aimLineGraphics&&this.ball&&f(this.ball)){this.aimLineGraphics.clear();var e=this.ball.getComponent(b).convertToWorldSpaceAR(O.ZERO),t=this.aimLineGraphics.node.getComponent(b).convertToNodeSpaceAR(e),i=g.toRadian(this._launchAngle);this.aimLineGraphics.lineWidth=4,this.aimLineGraphics.strokeColor=new P(255,255,255,180),this.aimLineGraphics.moveTo(t.x,t.y),this.aimLineGraphics.lineTo(t.x+200*Math.cos(i),t.y+200*Math.sin(i)),this.aimLineGraphics.stroke()}},l.launchBall=function(){if(!this._isGameStarted&&this.ball&&f(this.ball)){var e=this.ball.getComponent(v);if(e){var t=this.ball.getComponent(b).convertToWorldSpaceAR(O.ZERO),i=this.node.scene.getChildByName("Canvas");this.ball.parent=i,this.ball.setPosition(i.getComponent(b).convertToNodeSpaceAR(t));var n=g.toRadian(this._launchAngle);this._isGameStarted=!0,this.aimLineGraphics&&this.aimLineGraphics.clear(),e.enabled=!0,e.linearVelocity=new y(Math.cos(n),Math.sin(n)).multiplyScalar(this.launchForce)}}},l.update=function(e){if(this._isGameStarted&&this.ball&&f(this.ball)){var t=this.ball.getComponent(b).convertToWorldSpaceAR(O.ZERO);this.node.scene.getChildByName("Canvas").getComponent(b).convertToNodeSpaceAR(t).y<-700&&this.onBallFail()}},l.onBallFail=function(){var e=this;this._isGameStarted&&(this._isGameStarted=!1,this.gameOverUI&&(this.gameOverUI.active=!0),this.ball&&(this.ball.destroy(),this.ball=null),this.scheduleOnce((function(){e.resetToServeState()}),1.5))},t}(A)).prototype,"ballPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"gameOverUI",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(w.prototype,"aimLineGraphics",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(w.prototype,"scoreLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"launchForce",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),D=t(w.prototype,"paddleSensitivity",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=t(w.prototype,"angleSensitivity",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),U=w))||U));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});